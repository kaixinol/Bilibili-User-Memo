# Bilibili 用户备注 UI 使用说明

本文档根据当前 UI 代码生成，面向使用者说明面板与调试窗口的功能和操作方式。

**界面概览**

- 备注管理面板固定在页面底部，可通过左下角的表情按钮开/关。
- 面板包含：显示模式切换、主题与样式设置、控制栏、备注列表、（可选）自定义 CSS。
- 用户列表以网格卡片展示，宽屏三列、窄屏自动变两列/一列。

**昵称显示模式**

- `昵称`：仅显示昵称。
- `备注(昵称)`：优先显示备注，括号内显示昵称。
- `昵称(备注)`：优先显示昵称，括号内显示备注。
- `备注`：仅显示备注。

**用户卡片**

- 头像与昵称：昵称可点击，打开对应的 Bilibili 主页。
- BilibiliID：点击可复制，复制后短暂显示“已复制”。
- 备注：点击进入编辑，`Enter` 或失焦自动保存。
- 删除：右上角垃圾桶图标删除单个用户。
- 注意：将备注清空会直接删除该用户记录（不会再弹确认）。

**搜索与筛选**

- 搜索框支持昵称、备注、ID 模糊搜索。
- 右侧“×”按钮清空搜索。

**批量操作**

- 点击“多选用户”进入多选模式，卡片左侧出现勾选框。
- `Ctrl + A`（Windows/Linux）或 `Cmd + A`（macOS）在多选模式下对当前筛选结果执行全选/反选。
- “删除所选用户”按钮会显示已选数量，未选择时不可用。

**导入/导出**

- `导入`：选择 JSON 文件，支持旧格式。
- 导入会自动“新增/更新”对应用户，并提示统计结果。
- `导出`：按日期生成文件名，导出当前全部用户数据。

**刷新数据**

- “一键刷新数据”会拉取最新昵称与头像。
- 刷新过程中显示进度与计数，完成后自动恢复按钮状态。

**主题与样式**

- 右侧太阳/月亮图标切换浅色/深色主题。
- 主题状态会持久保存，下次打开自动恢复。

**自定义备注颜色**

- 点击“自定义备注颜色”选择颜色，颜色预览块会同步显示。
- 中键点击可清除自定义颜色并恢复默认。

**自定义备注样式（CSS）**

- 右键点击“自定义备注颜色”可展开/收起 CSS 编辑区。
- 支持完整 CSS 选择器，建议只作用于以下类名：
  `.bili-memo-tag`、`.editable-textarea`、`.bili-memo-input`
- 输入后约 1 秒自动应用，失焦也会立即应用。
- 若存在语法问题会显示“语法警告/错误/解析警告”。

示例：

```css
.bili-memo-tag {
  font-style: italic;
  letter-spacing: 0.5px;
}
.editable-textarea {
  background: rgba(0, 0, 0, 0.08);
  border-bottom: 2px solid currentColor;
}
```

**调试窗口（开发者）**

- 调试窗口为可拖拽、可缩放浮窗，带性能监视（FPS / Long Tasks / Heap）。
- 可输入 CSS 选择器并“加入”，或点击“扫描”重新匹配元素。
- 规则列表支持启用/禁用、改名、改选择器、改颜色与删除。
- 被匹配元素会显示彩色覆盖框，便于定位 UI 区块。
- 该窗口通常仅在调试模式或开发场景中使用。

**快捷与提示**

- 表情按钮右键可修改开/关按钮文字。
- ID 文本可点击复制，昵称点击打开主页。
- 多选模式下支持快捷键批量选择。
