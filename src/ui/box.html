<div
  class="user-box"
  x-data="userCard(user.id)"
  x-show="currentUser"
  :class="{ 'is-selected': isSelected }"
>
  <label class="user-select" x-show="isMultiSelect">
    <input type="checkbox" :value="user.id" x-model="selectedIds" @click.stop />
    <span class="user-select-mark"></span>
  </label>
  <div class="user-avatar-wrapper">
    <img :src="currentUser?.avatar || ''" class="user-avatar" :alt="currentUser?.nickname || user.id" />
  </div>
  <div class="user-info-section">
    <div class="user-info-label">BilibiliID</div>
    <div
      class="user-id"
      x-data="copyableUid(user.id)"
      x-init="init()"
      x-effect="refreshOverflow()"
      x-text="displayText"
      @click="copy()"
      :class="{ 'copied-status': copied }"
      :title="copied ? '' : '点击复制 ID'"
    ></div>
  </div>
  <div class="user-nickname-section" :title="currentUser?.nickname || user.id">
    <div class="user-info-label">昵称</div>
    <a
      :href="'https://space.bilibili.com/' + user.id"
      target="_blank"
      class="user-nickname-link"
      x-text="currentUser?.nickname || user.id"
    ></a>
  </div>
  <div class="user-note-section" x-data="memoEditor(user.id, currentUser?.memo || '')" x-effect="syncDraft()">
    <div class="user-info-label">备注</div>
    <input
      x-ref="memoInput"
      x-model="memoDraft"
      :readonly="!isEditing"
      :class="{ 'editing': isEditing }"
      class="user-note-input"
      @click="startEdit()"
      @blur="commit()"
      @keydown.enter.prevent="blurInput()"
      @keydown.escape.prevent="cancel(); blurInput()"
    />
  </div>
  <svg
    class="delete-btn"
    @click="confirmRemove()"
    x-show="!isMultiSelect"
    title="删除用户"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 24 24"
    fill="none"
    stroke="currentColor"
    stroke-width="2"
    stroke-linecap="round"
    stroke-linejoin="round"
  >
    <path d="M10 11v6" />
    <path d="M14 11v6" />
    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6" />
    <path d="M3 6h18" />
    <path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
  </svg>
</div>
